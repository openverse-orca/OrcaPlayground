{
  "orcalink_client": {
    "enabled": true,
    "server_address": "localhost:50351",
    "session_id": 1,
    "client_name": "mujoco_client",
    "update_rate_hz": 50,
    "encoding": {
      "i_frame_interval": 30,
      "change_threshold": 0.001
    },
    "session": {
      "control_mode": "sync",
      "expected_clients": 2,
      "ready_timeout_sec": 30.0,
      "grpc_call_timeout_sec": 5.0,
      "async_params": {
        "flow_control_enabled": true,
        "flow_control_window_size": 10,
        "speed_ratio_threshold": 2.0,
        "comment": "异步模式参数：服务端中央流控"
      },
      "sync_params": {
        "sync_window_size": 1,
        "comment": "同步模式参数：客户端本地窗口大小（1~3）"
      },
      "comment": "control_mode: 'sync'=同步模式(客户端本地窗口控制), 'async'=异步模式(服务端中央流控)。grpc_call_timeout_sec: 单次gRPC调用超时（秒），防止服务器无响应时无限阻塞"
    }
  },
  "orcalink_bridge": {
    "coupling_mode": "multi_point_force",
    "spring_constraint": {
      "channels": {
        "position": {
          "channel_id": 2,
          "publish": true,
          "subscribe": true,
          "comment": "MuJoCo发送和接收刚体位置：publish=发送本地位置给SPH, subscribe=接收SPH的位置用于计算弹簧力"
        }
      },
      "rigid_body_dynamics": {
        "mode": "internal",
        "force_smoothing_alpha": 0.3,
        "comment": "弹簧约束模式：MuJoCo侧不处理刚体动力学，仅作为位置源"
      },
      "force_clamping": {
        "enabled": true,
        "rigid_body": {
          "enabled": true,
          "max_acceleration_g": 10.0,
          "discard_on_clamp": true
        },
        "debug": {
          "log_clamped_forces": true,
          "log_threshold_n": 1000.0
        }
      }
    },
    "multi_point_force": {
      "channels": {
        "position": {
          "channel_id": 2,
          "publish": true,
          "subscribe": false,
          "comment": "MuJoCo发送SITE位置，接收SPH的MOCAP位置（用于可视化）"
        },
        "force": {
          "channel_id": 3,
          "publish": false,
          "subscribe": true,
          "comment": "MuJoCo接收SPH发送的多点力"
        }
      },
      "rigid_body_dynamics": {
        "mode": "external",
        "comment": "刚体动力学由MuJoCo主导"
      }
    }
  },
  
  "simulation": {
    "sync_mode": "spring_constraint",
    "timestep": 0.001,
    "substeps": 1
  },
  
  "rigid_bodies": [],
  
  "debug": {
    "verbose_logging": false
  }
}

